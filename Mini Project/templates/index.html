<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>BreathSafe ‚Äì Patient Air Suitability Monitor</title>

<style>
:root{
    --bg:#f4f7fb;
    --card:#ffffff;
    --good:#2ecc71;
    --moderate:#f1c40f;
    --poor:#e74c3c;
    --primary:#1f3c88;
}

*{
    box-sizing:border-box;
    font-family:"Segoe UI",Arial,sans-serif;
}

body{
    margin:0;
    background:var(--bg);
}

header{
    background:linear-gradient(90deg,#0f2027,#203a43,#2c5364);
    color:white;
    padding:18px 30px;
}

header h1{margin:0}

/* CONTAINER */
.container{
    padding:30px;
}

/* CONTROLS */
.controls{
    display:grid;
    grid-template-columns:2fr 1fr 1fr;
    gap:15px;
    margin-bottom:30px;
}

select,button{
    padding:12px;
    border-radius:10px;
    border:1px solid #ccc;
    font-size:15px;
}

button{
    background:var(--primary);
    color:white;
    border:none;
    cursor:pointer;
}

/* DASHBOARD */
.dashboard{
    display:grid;
    grid-template-columns:360px 1fr;
    gap:30px;
}

/* CARD */
.card{
    background:var(--card);
    border-radius:16px;
    padding:25px;
    box-shadow:0 10px 30px rgba(0,0,0,.07);
}

/* ü´Å LUNGS */
.lungs{
    display:flex;
    justify-content:center;
    gap:20px;
    margin:25px 0;
}

.lung{
    width:120px;
    height:160px;
    border-radius:60px;
    background:var(--moderate);
    animation:breath 3s infinite ease-in-out;
}

.lung.right{animation-delay:1.5s}

@keyframes breath{
    0%{transform:scaleY(1)}
    50%{transform:scaleY(1.15)}
    100%{transform:scaleY(1)}
}

/* STATUS */
.status{
    text-align:center;
    font-size:18px;
    font-weight:600;
}

.good{color:var(--good)}
.moderate{color:var(--moderate)}
.poor{color:var(--poor)}

/* FORECAST */
.forecast{
    display:grid;
    grid-template-columns:repeat(3,1fr);
    gap:20px;
    margin-top:25px;
}

.forecast-card{
    background:#f9fbff;
    border-radius:14px;
    padding:18px;
    text-align:center;
}

.forecast-card h4{margin:0}

/* RECOMMENDATION */
.recommend ul{
    padding-left:18px;
}

.recommend li{margin-bottom:8px}
</style>
</head>

<body>

<header>
    <h1>ü´Å BreathSafe ‚Äì Patient Air Suitability Monitor</h1>
</header>

<div class="container">

    <!-- CONTROLS -->
    <div class="controls">
        <select id="city">
            <option value="">-- Select District (Karnataka) --</option>
            <option>Bengaluru Urban</option>
            <option>Mysuru</option>
            <option>Mangaluru</option>
            <option>Udupi</option>
            <option>Tumakuru</option>
            <option>Hassan</option>
            <option>Mandya</option>
            <option>Shivamogga</option>
            <option>Davanagere</option>
            <option>Ballari</option>
            <option>Belagavi</option>
            <option>Kalaburagi</option>
            <option>Raichur</option>
            <option>Bidar</option>
            <option>Kolar</option>
            <option>Chitradurga</option>
            <option>Kodagu</option>
        </select>

        <select id="condition">
            <option value="Asthma">Asthma</option>
            <option value="COPD">COPD</option>
            <option value="Bronchitis">Bronchitis</option>
            <option value="Allergy">Allergy</option>
        </select>

        <button onclick="checkAQI()">Check Air Suitability</button>
    </div>

    <!-- DASHBOARD -->
    <div class="dashboard">

        <!-- LUNGS CARD -->
        <div class="card">
            <h3 style="text-align:center">Breathing Suitability</h3>
            <p id="locationText" style="text-align:center">Select a district</p>

            <div class="lungs">
                <div class="lung" id="lungLeft"></div>
                <div class="lung right" id="lungRight"></div>
            </div>

            <div class="status" id="lungStatus">--</div>
            <p style="text-align:center" id="aqiText">AQI: --</p>
        </div>

        <!-- RECOMMENDATION -->
        <div class="card recommend">
            <h3>Patient Recommendation</h3>
            <p id="adviceText">Select location to assess suitability.</p>

            <ul>
                <li>Follow doctor-prescribed medication</li>
                <li>Use mask if air quality worsens</li>
                <li>Avoid peak traffic hours</li>
            </ul>

            <div class="forecast">
                <div class="forecast-card">
                    <h4>Today</h4>
                    <div id="todayAQI">--</div>
                </div>
                <div class="forecast-card">
                    <h4>Tomorrow</h4>
                    <div id="tomorrowAQI">--</div>
                </div>
                <div class="forecast-card">
                    <h4>Next 48h</h4>
                    <div id="nextAQI">--</div>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
function checkAQI(){
    const city=document.getElementById("city").value;
    const condition=document.getElementById("condition").value;

    if(city===""){alert("Please select a district");return;}

    fetch("/getAQI",{
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body:JSON.stringify({city,condition})
    })
    .then(res=>res.json())
    .then(data=>{
        const aqi=data.aqi;

        document.getElementById("locationText").innerText=city+", Karnataka";
        document.getElementById("aqiText").innerText="AQI: "+aqi;
        document.getElementById("adviceText").innerText=data.advice;

        document.getElementById("todayAQI").innerText=aqi;
        document.getElementById("tomorrowAQI").innerText=aqi-20;
        document.getElementById("nextAQI").innerText=aqi-40;

        const lungL=document.getElementById("lungLeft");
        const lungR=document.getElementById("lungRight");
        const status=document.getElementById("lungStatus");

        if(aqi<=50){
            lungL.style.background=lungR.style.background="var(--good)";
            status.innerText="Safe for Patients";
            status.className="status good";
        }else if(aqi<=100){
            lungL.style.background=lungR.style.background="var(--moderate)";
            status.innerText="Caution for Patients";
            status.className="status moderate";
        }else{
            lungL.style.background=lungR.style.background="var(--poor)";
            status.innerText="Not Suitable for Patients";
            status.className="status poor";
        }
    });
}
</script>

</body>
</html>
